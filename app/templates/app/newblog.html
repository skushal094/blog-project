{% extends 'app/base.html' %}

{% block title %}New Post{% endblock %}

{% block content %}

        <!-- edit form column -->
        <div class="col-lg-12 mt-4">
            <h4>New Blog</h4>
            <br>
        </div>
        <div class="col-lg-8 push-lg-4 personal-info">
             <form role="form" action="{% url 'newblog' %}" method="post" enctype="multipart/form-data">
                 {% csrf_token %}
<!--                <div class="form-group row">-->
<!--                    <label class="col-lg-3 col-form-label form-control-label">Author</label>-->
<!--                    <div class="col-lg-9">-->
<!--                        <input name="username" class="form-control" type="text" value="{{ user.get_username }}" readonly/>-->
<!--                    </div>-->
<!--                </div>-->
                <div class="form-group row">
                    <label class="col-lg-3 col-form-label form-control-label">Image</label>
                    <div class="col-lg-9">
                        <input id="imgField" name="image" class="form-control" type="file" required onchange="checkExt(this.value)"/>
                        <div class="help" id="imgHelp"></div>
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-lg-3 col-form-label form-control-label">Description</label>
                    <div class="col-lg-9">
                        <textarea name="desc" class="form-control" required></textarea>
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-lg-3 col-form-label form-control-label"></label>
                    <div class="col-lg-9">
                        <input type="reset" class="btn btn-secondary" value="Cancel" />
                        <input type="submit" class="btn btn-primary" value="Save" />
                    </div>
                </div>
             </form>
            <script>
                function checkExt(filename)
                {
                    let allowedExtensions = {'.jpg': 1, '.jpeg': 1, '.png': 1};
                    var match = /\..+$/;
                    var ext = filename.match(match);
                    if(!allowedExtensions[ext])
                    {
                        document.getElementById('imgHelp').innerHTML = "Image must be .jpg, .jpeg or .png";
                        document.getElementById('imgField').value = "";
                    }
                }
            </script>
        </div>
<!--        <div class="col-lg-4 pull-lg-8 text-xs-center">-->
<!--                <img src="//placehold.it/150" class="m-x-auto img-fluid img-circle" alt="avatar" />-->
<!--                <h6 class="m-t-2">Upload a different photo</h6>-->
<!--                <label class="custom-file">-->
<!--                  <input type="file" id="file" class="custom-file-input">-->
<!--                  <span class="custom-file-control">Choose file</span>-->
<!--                </label>-->
<!--        </div>-->

<hr />
{% endblock %}

